<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Date Proposal</title>
    <meta name="description" content="A playful one-page date proposal with a built-in form that sends to Make webhook." />
    <style>
      :root{
        --bg1:#ffdde1;
        --bg2:#ee9ca7;
        --card:#ffffffcc;
        --text:#2a2a2a;
        --muted:#6b6b6b;
        --accent:#ff5a7a;
        --accent2:#7c3aed;
        --shadow: 0 14px 40px rgba(0,0,0,.15);
        --radius: 22px;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
        color:var(--text);
        background: radial-gradient(1200px 700px at 20% 10%, #ffffffaa, transparent),
                    linear-gradient(120deg,var(--bg1),var(--bg2));
        overflow-x:hidden;
      }

      .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 80px}
      header{
        display:flex;align-items:center;justify-content:space-between;gap:16px;
        position:sticky;top:0;z-index:5;
        padding:12px 0;
        backdrop-filter: blur(8px);
      }
      .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
      .dot{width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 6px rgba(255,90,122,.18)}
      nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
      nav a{
        text-decoration:none;color:var(--text);font-weight:600;
        padding:10px 12px;border-radius:999px;background:rgba(255,255,255,.35);
        transition:.15s ease;
      }
      nav a:hover{transform:translateY(-1px);background:rgba(255,255,255,.55)}

      .hero{
        display:grid;grid-template-columns: 1.2fr .8fr;gap:18px;
        margin-top:18px;
      }
      @media (max-width:900px){.hero{grid-template-columns:1fr;}}
      .card{
        background:var(--card);
        border:1px solid rgba(255,255,255,.35);
        border-radius:var(--radius);
        box-shadow:var(--shadow);
        padding:22px;
      }
      h1{margin:0 0 10px;font-size: clamp(28px, 3.2vw, 44px); line-height:1.05;}
      .sub{margin:0 0 18px;color:var(--muted);font-size:16px;max-width:58ch}
      .ctaRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
      .btn{
        border:0;cursor:pointer;
        padding:12px 16px;border-radius:999px;
        font-weight:800;
        transition:.15s ease;
      }
      .btnPrimary{background:var(--accent);color:white;box-shadow:0 12px 24px rgba(255,90,122,.25)}
      .btnPrimary:hover{transform:translateY(-1px)}
      .btnGhost{background:rgba(255,255,255,.5);color:var(--text)}
      .btnGhost:hover{transform:translateY(-1px);background:rgba(255,255,255,.7)}
      .pill{
        display:inline-flex;align-items:center;gap:8px;
        padding:8px 12px;border-radius:999px;
        background:rgba(255,255,255,.5);
        font-weight:700;color:var(--muted);margin:0 8px 10px 0;
      }

      .rightBox{
        display:flex;flex-direction:column;gap:12px;height:100%;
      }
      .mini{
        background:rgba(255,255,255,.45);
        border:1px solid rgba(255,255,255,.35);
        border-radius:18px;
        padding:16px;
      }
      .mini h3{margin:0 0 8px;font-size:16px}
      .mini p{margin:0;color:var(--muted);font-size:14px;line-height:1.45}

      section{margin-top:22px}
      .sectionTitle{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;margin-bottom:10px}
      .sectionTitle h2{margin:0;font-size:20px}
      .sectionTitle span{color:var(--muted);font-size:14px}

      .grid{
        display:grid;grid-template-columns: repeat(3,1fr);gap:14px;
      }
      @media (max-width:900px){.grid{grid-template-columns:1fr}}
      .tile{
        background:rgba(255,255,255,.45);
        border:1px solid rgba(255,255,255,.35);
        border-radius:18px;padding:16px;
      }
      .tile h3{margin:0 0 8px;font-size:16px}
      .tile p{margin:0;color:var(--muted);font-size:14px;line-height:1.45}

      .native-form{
        display:grid;
        grid-template-columns:1fr 1fr;
        gap:12px;
        margin-top:10px;
      }
      @media (max-width:700px){.native-form{grid-template-columns:1fr}}
      label{display:flex;flex-direction:column;gap:6px;font-weight:700}
      input, select, textarea{
        padding:12px 12px;
        border-radius:14px;
        border:1px solid rgba(0,0,0,.08);
        background:rgba(255,255,255,.75);
        outline:none;
        font-size:14px;
      }
      textarea{min-height:110px;resize:vertical}
      .full{grid-column:1 / -1}
      .checks{display:flex;gap:10px;flex-wrap:wrap}
      .check{
        display:flex;align-items:center;gap:8px;
        background:rgba(255,255,255,.65);
        border:1px solid rgba(0,0,0,.06);
        border-radius:999px;
        padding:8px 12px;
        font-weight:700;color:var(--muted);
      }
      .check input{width:16px;height:16px}
      .status{
        margin-top:10px;
        color:var(--muted);
        font-weight:700;
      }
      .status.ok{color:#14532d}
      .status.err{color:#7f1d1d}

      .divider{
        height:1px;
        background:rgba(255,255,255,.55);
        margin:18px 0;
      }

      .hearts{
        position:fixed;inset:0;pointer-events:none;z-index:9999;overflow:hidden;
      }
      .heart{
        position:absolute;
        font-size:18px;
        opacity:.85;
        animation: floatUp 6.5s linear forwards;
        filter: drop-shadow(0 8px 10px rgba(0,0,0,.15));
      }
      @keyframes floatUp{
        from{ transform: translateY(0) translateX(0) rotate(0deg); opacity:.9;}
        to{ transform: translateY(-120vh) translateX(70px) rotate(24deg); opacity:0;}
      }

      footer{margin-top:26px;color:rgba(0,0,0,.55);font-weight:700;font-size:13px}
    </style>
  </head>
  <body>
    <div class="hearts" id="hearts"></div>

    <div class="wrap">
      <header>
        <div class="brand"><span class="dot"></span> Date Proposal</div>
        <nav>
          <a href="#why">Why</a>
          <a href="#plan">Plan</a>
          <a href="#run">Run test</a>
        </nav>
      </header>

      <div class="hero">
        <div class="card">
          <div>
            <span class="pill">no Tally</span>
            <span class="pill">Make webhook</span>
            <span class="pill">one-file</span>
          </div>

          <h1>Let’s plan a date</h1>
          <p class="sub">
            This page has a built-in form that sends your chosen date/time and notes to Make via webhook.
            Everything works without a server (GitHub Pages-friendly).
          </p>

          <div class="ctaRow">
            <button class="btn btnPrimary" id="btnRun">Run test</button>
            <button class="btn btnGhost" id="btnHearts">More hearts</button>
          </div>

          <div class="divider"></div>

          <div class="grid" id="why">
            <div class="tile">
              <h3>Simple</h3>
              <p>Single HTML file: styles + logic inside. Easy to copy/paste into GitHub.</p>
            </div>
            <div class="tile">
              <h3>Direct</h3>
              <p>Form submits via fetch() to your Make webhook URL, with status messages.</p>
            </div>
            <div class="tile">
              <h3>Clean</h3>
              <p>No extra embeds or widgets. Only what you need for the flow.</p>
            </div>
          </div>
        </div>

        <div class="rightBox">
          <div class="mini">
            <h3>What it sends</h3>
            <p><b>date</b>, <b>time</b>, <b>format</b>, <b>conditions[]</b>, <b>notes</b></p>
          </div>
          <div class="mini">
            <h3>Where to change webhook</h3>
            <p>Edit <b>MAKE_WEBHOOK_URL</b> in the script at the bottom.</p>
          </div>
          <div class="mini" id="plan">
            <h3>How to use</h3>
            <p>Open page → fill the form → submit → check Make scenario for the payload.</p>
          </div>
        </div>
      </div>

      <section id="run">
        <div class="card">
          <div class="sectionTitle">
            <h2>Run test</h2>
            <span>Send a test payload to Make</span>
          </div>

          <form id="dateForm" class="native-form">
            <label>
              Date
              <input type="date" name="date" required />
            </label>

            <label>
              Time
              <input type="time" name="time" required />
            </label>

            <label>
              Format
              <select name="format" required>
                <option value="" selected disabled>Choose one</option>
                <option value="walk">Walk</option>
                <option value="coffee">Coffee</option>
                <option value="dinner">Dinner</option>
                <option value="movie">Movie</option>
                <option value="surprise">Surprise</option>
              </select>
            </label>

            <label>
              Mood
              <select name="mood" required>
                <option value="" selected disabled>Choose one</option>
                <option value="chill">Chill</option>
                <option value="fun">Fun</option>
                <option value="romantic">Romantic</option>
                <option value="adventure">Adventure</option>
              </select>
            </label>

            <div class="full">
              <div style="font-weight:800;margin-bottom:6px;">Conditions</div>
              <div class="checks">
                <label class="check"><input type="checkbox" name="conditions" value="rain_ok" /> Rain is ok</label>
                <label class="check"><input type="checkbox" name="conditions" value="no_alcohol" /> No alcohol</label>
                <label class="check"><input type="checkbox" name="conditions" value="quiet_place" /> Quiet place</label>
                <label class="check"><input type="checkbox" name="conditions" value="photos" /> Photos</label>
              </div>
            </div>

            <label class="full">
              Notes
              <textarea name="notes" placeholder="Any extra details..."></textarea>
            </label>

            <div class="full" style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
              <button class="btn btnPrimary" type="submit" id="submitBtn">Send to Make</button>
              <button class="btn btnGhost" type="button" id="fillDemo">Autofill demo</button>
            </div>

            <div class="status full" id="formStatus" aria-live="polite"></div>
          </form>
        </div>
      </section>

      <footer>
        Tip: if your Make scenario needs a secret token, add a header in fetch() and validate it in Make.
      </footer>
    </div>

    <script>
      // 1) PUT YOUR REAL MAKE WEBHOOK HERE
      const MAKE_WEBHOOK_URL = "https://hook.eu1.make.com/1zt7u3o5q5i1jzob5c1ijhu4wiakl5eb";

      // 2) OPTIONAL: set a token to reduce random spam (validate in Make)
      // const MAKE_TOKEN = "your-secret-token";
      const MAKE_TOKEN = "";

      // Smooth scroll to Run test
      const btnRun = document.getElementById("btnRun");
      btnRun.addEventListener("click", () => {
        document.getElementById("run").scrollIntoView({ behavior: "smooth", block: "start" });
      });

      // Hearts
      const hearts = document.getElementById("hearts");
      function spawnHeart(count = 1) {
        for (let i = 0; i < count; i++) {
          const el = document.createElement("div");
          el.className = "heart";
          el.textContent = Math.random() > 0.5 ? "❤" : "♥";
          el.style.left = Math.random() * 100 + "vw";
          el.style.top = (80 + Math.random() * 20) + "vh";
          el.style.fontSize = (14 + Math.random() * 18) + "px";
          el.style.animationDuration = (5.2 + Math.random() * 2.0) + "s";
          hearts.appendChild(el);
          setTimeout(() => el.remove(), 7500);
        }
      }
      setInterval(() => spawnHeart(1), 450);

      document.getElementById("btnHearts").addEventListener("click", () => spawnHeart(14));

      // Form -> Make
      const form = document.getElementById("dateForm");
      const formStatus = document.getElementById("formStatus");
      const submitBtn = document.getElementById("submitBtn");
      const fillDemo = document.getElementById("fillDemo");

      function setStatus(text, kind = "") {
        formStatus.textContent = text;
        formStatus.classList.remove("ok", "err");
        if (kind) formStatus.classList.add(kind);
      }

      fillDemo.addEventListener("click", () => {
        const now = new Date();
        const yyyy = now.getFullYear();
        const mm = String(now.getMonth() + 1).padStart(2, "0");
        const dd = String(now.getDate() + 1).padStart(2, "0");
        form.elements.date.value = `${yyyy}-${mm}-${dd}`;
        form.elements.time.value = "19:30";
        form.elements.format.value = "dinner";
        form.elements.mood.value = "romantic";
        form.elements.notes.value = "Test run from the website.";
        setStatus("Filled demo values. Now press Send to Make.");
      });

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (!MAKE_WEBHOOK_URL || !MAKE_WEBHOOK_URL.startsWith("http")) {
          setStatus("Webhook URL is not set. Update MAKE_WEBHOOK_URL in the script.", "err");
          return;
        }

        const data = new FormData(form);
        const payload = {
          date: data.get("date"),
          time: data.get("time"),
          format: data.get("format"),
          mood: data.get("mood"),
          conditions: data.getAll("conditions"),
          notes: data.get("notes") || ""
        };

        submitBtn.disabled = true;
        submitBtn.style.opacity = "0.7";
        setStatus("Sending...");

        try {
          const headers = { "Content-Type": "application/json" };
          if (MAKE_TOKEN) headers["X-Token"] = MAKE_TOKEN;

          const res = await fetch(MAKE_WEBHOOK_URL, {
            method: "POST",
            headers,
            body: JSON.stringify(payload)
          });

          if (!res.ok) {
            const text = await res.text().catch(() => "");
            throw new Error(`HTTP ${res.status} ${res.statusText}${text ? " — " + text : ""}`);
          }

          setStatus("Sent успешно. Проверь Make scenario, что payload прилетел.", "ok");
          form.reset();
        } catch (err) {
          setStatus("Ошибка отправки: " + (err?.message || String(err)), "err");
        } finally {
          submitBtn.disabled = false;
          submitBtn.style.opacity = "1";
        }
      });
    </script>
  </body>
</html>

